configfile: "config/config.yaml"


include: "rules/common.smk"
include: "rules/precomputed.smk"
include: "rules/gpn_star.smk"
include: "rules/alphagenome.smk"
include: "rules/model.smk"
include: "rules/promoterai.smk"
include: "rules/spliceai.smk"
include: "rules/conservation.smk"
include: "rules/plot.smk"


rule all:
    input:
        expand(
            "results/plots/model_comparison/{dataset}.svg",
            dataset=list(config["evaluate_models"].keys()) + ["combined"],
        ),
        "results/plots/model_comparison/combined_ensemble.svg",
        "results/plots/model_comparison/promoterai_covered.svg",
        "results/plots/model_comparison/spliceai_covered.svg",
        [
            f"results/plots/score_histogram/{dataset}/{model}.svg"
            for dataset, models in config["evaluate_models"].items()
            for model in models
        ],
        expand(
            "results/plots/auprc_by_distance/{dataset}.svg",
            dataset=config["evaluate_models"].keys(),
        ),


rule all_MRR_plots:
    input:
        expand(
            "results/plots/mrr/{dataset}.svg",
            dataset=[
                d
                for d in config["evaluate_models_mrr"]
                if d.endswith("_traits_matched_9")
            ],
        ),


rule all_metric_experiments_matched_one:
    input:
        "results/plots/model_comparison/mendelian_traits_gene_matched_1.svg",
        "results/plots/pairwise/mendelian_traits_gene_matched_1.svg",
